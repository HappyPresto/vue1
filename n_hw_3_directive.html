<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1</title>
    <link rel="stylesheet" href="css//bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href="css/styles.css" rel="stylesheet">
	<style>
	    .content{
			height: 300px;
			overflow: auto;
		}
	</style>
    <script src="js/vue.js"></script>
</head>
<body>
<div class="wrapper">
    <div class="sample">
        <div v-timer:1000.5="onTimer" :style = "{fontSize: fontSize + 'px'}">1</div>
        <div v-timer:1000.5.run="onTimer" :style = "{fontSize: fontSize + 'px'}">2</div>
        <!--<div v-timer:1000="onTimer">3</div>-->
    </div>
</div>
<script>
    Vue.directive('timer', {
        bind(el, binding) {
            let timer;
            let counter = 0;
            let count;
            for (key in binding.modifiers) {
                if ((Number(key) != NaN) && (counter == 0)) {
                    count = key;
                }
                if (key == "run") {
                    console.log("run");
                }
                counter++
            }
            console.log(binding);
            // 1000 options.arg
            // 5 options.modifiers
            (callback = (e) => {
                console.log(count);
                /*if (count <= 0) {
                    clearInterval(timer);
                }*/
                console.log(binding.arg);

                timer = setInterval(() => {
                    if (count == 0) {
                        clearInterval(timer);
                        return
                    }
                    binding.value.call(this, e);
                    count--;
                    console.log("count - " + count);
                }, binding.arg)

                /*--count;
                console.log("count - " + count);*/
            })();
        }
    })


    new Vue({
        el: '.sample',
        data: {
            fontSize: 14,
            info: [

            ]
        },
        methods: {
            onTimer() {
                console.log(this.info.length);
                this.info.push({
                    size: 14
                })
                console.log(this.info)
            }
        }
    })
</script>
</body>
</html>